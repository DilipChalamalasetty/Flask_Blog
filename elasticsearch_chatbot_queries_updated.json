PUT akn_kb3
{
  "settings": {
    "analysis": {
      "filter": {
        "autocomplete_filter": {
          "type": "edge_ngram",
          "min_gram": 1,
          "max_gram": 20
        },
        "english_stemmer": {
          "type": "stemmer",
          "language": "english"
        },
        "english_stop": {
          "type": "stop",
          "stopwords": "_english_"
        },
        "synonym": {
          "format": "wordnet",
          "type": "synonym",
          "synonyms_path": "analysis/wn_s.pl.txt",
          "lenient": "true"
        }
      },
      "analyzer": {
        "autocomplete": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "autocomplete_filter"
          ]
        },
        "synonym": {
          "filter": [
            "english_stop",
            "english_stemmer",
            "synonym",
            "lowercase"
          ],
          "tokenizer": "standard"
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "category": {
        "type": "text",
        "fields": {
          "keyword":{
            "type":"keyword"
          }
        }
      },
      "questions": {
        "type": "search_as_you_type",
        "analyzer": "autocomplete",
        "search_analyzer": "synonym"
      }
    }
  }
}

POST akn_kb3/_search
file content

GET akn_kb3/_search
{ 
   "query":{ 
      "bool":{ 
         "must":{ 
            "multi_match":{ 
               "query":"sofware travelling",
               "type":"bool_prefix",
               "fields":[ 
                  "questions",
                  "questions._2gram",
                  "questions._3gram"
               ],
               "fuzziness":"AUTO"
            }
         },
         "filter":{ 
            "term":{ 
               "category.keyword":"Software Piracy"
            }
         }
      }
   }
}


